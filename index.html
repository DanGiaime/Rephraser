<html>
    <head>
        <link  rel="stylesheet" href="theme.css">
    </head>
    <body>
        <textarea type="text" id="text"></textarea>
        <input type="submit" value="Submit" id="submit">

        <div id="buttonBox"></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>
            {
                document.getElementById("submit").addEventListener("click",Click);

                function Click(e){
                  let string=document.getElementById("text").value;
                  let words=string.split(" ");
                  for(var i=0;i<words.length;i++){
                    makeButton(words[i]);
                  }
                }

                function jsonLoaded(button, e){
                  let newWord = undefined;

                  if(e.noun != undefined && e.noun.syn != undefined) {
                    newWord = e.noun.syn[Math.floor(Math.random()*e.noun.syn.length)];
                  }
                  else if (e.verb != undefined && e.verb.syn != undefined) {
                    newWord = e.verb.syn[Math.floor(Math.random()*e.verb.syn.length)];
                  }

                  button.innerHTML = newWord;
                }

                function makeButton(word) {
                  let newButton = document.createElement("button");
                  document.getElementById("buttonBox").appendChild(newButton);
                  newButton.innerHTML = word;
                  newButton.text = word;
                  newButton.onclick = makeCall;
                }

                function makeCall(event) {
                  let jdata = $.ajax({
                    dataType:"json",
                    url: 'http://words.bighugelabs.com/api/2/0083cd9564ee4a75c43de2d4689b0bc1/'+this.text+'/json',
                    data: null,
                    success: function(e) {
                      jsonLoaded(event.target, e);
                    },
                    error: function(e) {
                      alert("No replacements found! Sorry!");
                    }
                  });
                }
            }
        </script>

    </body>
</html>
